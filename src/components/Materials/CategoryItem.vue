<template>
  <div class="accordion-item">
    <div class="accordion-header" @click="$emit('toggleCategory', category)">
      <h3>{{ category }} ({{ materials.length }})</h3>
      <select @change="$emit('changeMaterialSort', $event)" @click.stop>
        <option selected disabled>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∫—Ä—É–ø–∏—Ü!</option>
        <option value="quantity-asc">–û—Ç –º–µ–ª–∫–∏—Ö –∫—É—Å–∫–æ–≤ –∫ —Ü–µ–ª—ã–º –∑–∞–ª–µ–∂–∞–º!</option>
        <option value="quantity-desc">–û—Ç –≤–µ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥–æ—Ä –∫ –∫—Ä—É–ø–∏—Ü–∞–º!</option>
      </select>
      <span class="accordion-icon" :class="{ opened: isOpen }"> ü†ü </span>
    </div>
    <transition name="accordion">
      <div v-if="isOpen" class="accordion-content">
        <MaterialsList
          :materials="materials"
          :unitOptions="unitOptions"
          @remove="$emit('removeMaterial', $event)"
        />
      </div>
    </transition>
  </div>
</template>

<script setup>
import MaterialsList from './MaterialsList.vue'

defineProps({
  category: {
    type: String,
    required: true
  },
  materials: {
    type: Array,
    required: true
  },
  isOpen: {
    type: Boolean,
    required: true
  },
  unitOptions: {
    type: Array,
    required: true
  }
})

defineEmits(['toggleCategory', 'changeMaterialSort', 'removeMaterial'])
</script>

<style></style>
